<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">
<head>
    <title>Resultados de Búsqueda</title>
    <link rel="stylesheet" th:href="resultados-huesped.css">
</head>
<body>

    <div class="top-bar" layout:fragment="top-bar-content">
        Premier
    </div>

    <div class="form-container" layout:fragment="content">
        
        <h1 class="titulo-resultados">Buscar Huésped</h1>
       
        <form id="form-resultados" th:action="@{/huespedes/seleccionar}" method="post">

            <input type="hidden" id="input-accion" name="accion" th:value="${accion}" />
            <input type="hidden" name="numeroHabitacion" th:value="${numeroHabitacion}" />
            <input type="hidden" name="fechaIngreso" th:value="${fechaIngreso}" />
            <input type="hidden" name="fechaEgreso" th:value="${fechaEgreso}" />
            
            <div class="table-scroll-container">
                <table class="result-table" id="tabla-resultados">
                    <thead>
                        <tr>
                            <th onclick="ordenarTabla(0)" class="sortable">Apellido <span class="sort-icon">⇅</span></th>
                            <th onclick="ordenarTabla(1)" class="sortable">Nombre <span class="sort-icon">⇅</span></th>
                            <th onclick="ordenarTabla(2)" class="sortable">Tipo Doc <span class="sort-icon">⇅</span></th>
                            <th onclick="ordenarTabla(3)" class="sortable">Número Doc <span class="sort-icon">⇅</span></th>
                            <th style="width: 40px;"></th> 
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="h : ${huespedes}">
                            <td th:text="${h.apellido}">APELLIDO</td>
                            <td th:text="${h.nombres}">NOMBRE</td>
                            <td th:text="${h.tipoDocumento}">DNI</td>
                            <td th:text="${h.numeroDocumento}">0000001</td>
                            <td class="radio-cell">
                                <input type="checkbox" 
                                       name="idSeleccionado" 
                                       th:value="${h.tipoDocumento} + '_' + ${h.numeroDocumento}"
                                       th:data-tipo-doc="${h.tipoDocumento}"
                                       th:data-nro-doc="${h.numeroDocumento}">
                            </td>
                        </tr>
                        
                        <tr th:if="${#lists.isEmpty(huespedes)}">
                            <td colspan="5" style="text-align:center; padding: 20px;">
                                No se encontraron huéspedes.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="footer-buttons">
                <button type="button" id="btn-cancelar" class="btn-custom btn-cancelar">CANCELAR</button>
                
                <button type="submit" id="btn-siguiente" class="btn-custom btn-siguiente" 
                        th:disabled="${#lists.isEmpty(huespedes)}">
                    SIGUIENTE
                </button>
            </div>
        </form>
    </div>

    <div layout:fragment="modals">
        <div id="modal-accion" class="modal-overlay">
            <div class="modal-box">
                <div class="modal-header"><span>Premier</span></div>
                <div class="modal-content">¿Qué desea hacer ahora?</div>
                <div class="modal-footer">
                    <button type="button" class="btn-modal" onclick="gestorOcupacion.finalizarSalir()">SALIR</button>
                    <button type="button" class="btn-modal" onclick="gestorOcupacion.cargarOtraHabitacion()">CARGAR OTRA HABITACIÓN</button>
                    <button type="button" class="btn-modal" onclick="gestorOcupacion.seguirCargando()">SEGUIR</button>
                </div>
            </div>
        </div>
        <div id="modal-feedback" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-header" id="feedback-header-bg">
            <div id="feedback-header-title" style="display:flex; gap:10px; align-items:center;">
                </div>
            <span>Premier</span>
        </div>
        
        <div class="modal-content" id="feedback-message">
            </div>
        
        <div class="modal-footer">
            <button type="button" class="btn-modal" id="btn-feedback-aceptar">ACEPTAR</button>
        </div>
    </div>
</div>

<script th:src="@{/huespedes/gestor-ocupacion.js}"></script>
        <script th:src="@{/huespedes/gestor-ocupacion.js}"></script>
        <script th:src="@{/huespedes/resultados-busqueda.js}"></script>
    </div>

</body>
</html>